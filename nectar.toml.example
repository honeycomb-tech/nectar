# Nectar Configuration File
# Copy this file to nectar.toml and update with your values
version = "1.0"

[database]
# Database connection string
dsn = "user:password@tcp(localhost:4000)/nectar?charset=utf8mb4&parseTime=True&loc=Local&timeout=300s&readTimeout=300s&writeTimeout=300s&maxAllowedPacket=134217728&autocommit=true&interpolateParams=true"
connection_pool = 32
max_idle_conns = 16
max_open_conns = 32
conn_max_lifetime = 3600000000000  # 1 hour in nanoseconds

[cardano]
# Path to Cardano node socket
node_socket = "/opt/cardano/cnode/sockets/node.socket"
# Network magic: 764824073 (mainnet), 1097911063 (testnet), 1 (preprod), 2 (preview)
network_magic = 764824073
# Protocol mode: "auto", "node-to-node", "node-to-client"
protocol_mode = "auto"

[cardano.rewards]
# Reward calculation parameters
treasury_tax = 0.20
monetary_expansion = 0.003
optimal_pool_count = 500

[performance]
# Number of parallel workers for block processing
worker_count = 28
# Enable bulk sync mode for faster initial sync
bulk_mode_enabled = true
# Number of blocks to fetch in bulk mode
bulk_fetch_range_size = 10000
# Statistics update interval
stats_interval = 5000000000  # 5 seconds in nanoseconds
# Size of the block processing queue
block_queue_size = 100000

[dashboard]
# Enable dashboard display
enabled = true
# Dashboard type: "terminal", "web", "both", "none"
type = "both"
# Web dashboard port (if type is "web" or "both")
web_port = 8080
# Show detailed logs in dashboard
detailed_log = false

[monitoring]
# Enable Prometheus metrics
metrics_enabled = true
# Metrics server port
metrics_port = 9090
# Log level: "debug", "info", "warn", "error"
log_level = "info"
# Log format: "json", "text"
log_format = "json"

[metadata]
# Enable off-chain metadata fetching
enabled = false  # Disabled during initial sync for performance
# Number of metadata fetcher workers
worker_count = 12
# Metadata queue size
queue_size = 5000
# Rate limit (requests per second)
rate_limit = 50
# Maximum retries for failed requests
max_retries = 3
# User agent for metadata requests
user_agent = "Nectar/1.0"

[state_query]
# Enable state query service for rewards calculation
enabled = true
# Socket path (uses cardano.node_socket if empty)
socket_path = ""